"use strict";var __decorate=this&&this.__decorate||function(t,e,o,a){var r,n=arguments.length,i=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,a);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(i=(n<3?r(i):n>3?r(e,o,i):r(e,o))||i);return n>3&&i&&Object.defineProperty(e,o,i),i},__metadata=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},core_1=require("@angular/core"),moment=require("moment"),WorkoutChart=function(){function t(t){this.element=t,this._element=this.element.nativeElement}return t.prototype.ngOnInit=function(){google.charts.load("current",{packages:["bar"]})},t.prototype.formatData=function(t,e,o){function a(t,e){return"duration"==e?t=moment.duration({minutes:t.duration[0].minutes,hours:t.duration[0].hours}).asMinutes():t[e]}var r=[],n=moment(t.startDate),i=moment(t.endDate),c=i.diff(n,"days");if(c<=8){for(var d=[],u=moment(n).format("YYYY-MM-DD"),m=0;m<c;m++)d.push(u),u=moment(u).add(1,"days").format("YYYY-MM-DD");for(var s in d){var h=!1;for(var p in o)d[s]==moment(o[p].date).format("YYYY-MM-DD")&&(r.push([moment(o[p].date).format("MM/DD/YYYY"),a(o[p],e)]),h=!0);0==h&&r.push([moment(d[s]).format("MM/DD/YYYY"),0])}}else for(var p in o)r.push([moment(o[p].date).format("MM/DD/YYYY"),a(o[p],e)]);return r},t.prototype.getHTextLength=function(t){var e=1;return e=t.length<9?1:t.length>9&&t.length<32?4:10},t.prototype.getBarColor=function(t){var e="blue";return"heartrate"==t?e="yellow":"duration"==t&&(e="orange"),e},t.prototype.drawChart=function(t,e,o){var a=new google.visualization.DataTable;a.addColumn("string","Date"),a.addColumn("number","Calories"),a.addRows(this.formatData(t,e,o)),a.sort({column:0});var r={title:"",width:900,height:400,legend:{position:"none"},chartArea:{width:"80%",height:"80%"},hAxis:{showTextEvery:this.getHTextLength(o)},colors:[this.getBarColor(e)]},n=new google.visualization.ColumnChart(document.getElementById("workout-chart"));n.draw(a,r)},t.prototype.drawGraph=function(t,e,o){google.charts.setOnLoadCallback(this.drawChart(t,e,o))},__decorate([core_1.Input("dateRange"),__metadata("design:type",Object)],t.prototype,"dateRange",void 0),__decorate([core_1.Input("chartType"),__metadata("design:type",String)],t.prototype,"chartType",void 0),__decorate([core_1.Input("chartOptions"),__metadata("design:type",Object)],t.prototype,"chartOptions",void 0),__decorate([core_1.Input("chartData"),__metadata("design:type",Object)],t.prototype,"chartData",void 0),t=__decorate([core_1.Directive({selector:"workout-chart"}),__metadata("design:paramtypes",[core_1.ElementRef])],t)}();exports.WorkoutChart=WorkoutChart;